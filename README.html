<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Loeffler H</title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="images/style.css" type="text/css" />
</head>
<body>
<div id="header">
<h1 class="title">Loeffler <em>H</em></h1>
</div>
<h1 id="setup-and-assembly"><span class="header-section-number">1</span> Setup and assembly</h1>
<h2 id="software-setup"><span class="header-section-number">1.1</span> Software setup</h2>
<ol style="list-style-type: decimal">
<li>Get the code from <a href="https://github.com/markk/loeffler-h">GitHub</a>. Click the <code>Clone or download</code> button and then <code>Download ZIP</code>.</li>
<li>Extract the zip archive in your <code>~/Documents</code> folder and rename the folder to <code>loeffler-h</code>.</li>
<li>This documentation will now be available locally at <code>~/Documents/loeffler-h/README.html</code>.</li>
<li>Install <a href="https://supercollider.github.io/download">SuperCollider</a>.</li>
<li>Start the <code>SuperCollider IDE</code> and open the file <code>~/Documents/loeffler-h/supercollider/run.scd</code>.</li>
<li>Follow the instructions to install the class.</li>
<li>Read the rest of the <code>run.scd</code> file for details on running the software once the hardware is assembled.</li>
</ol>
<h2 id="equipment-required"><span class="header-section-number">1.2</span> Equipment required</h2>
<ul>
<li>8-channel mixer</li>
<li>Stereo PA</li>
<li>4 × double-braced percussion stands, with 1 inch (25.4mm) diameter upper tube</li>
<li>XLR and TS jack cables</li>
<li>Headphone amplifier for click-track</li>
</ul>
<h2 id="tools"><span class="header-section-number">1.3</span> Tools</h2>
<h3 id="included" class="unnumbered">Included</h3>
<ul>
<li>ratchet with 8mm (M5) socket</li>
<li>mini screwdriver set</li>
<li>hex key set</li>
</ul>
<h3 id="required" class="unnumbered">Required</h3>
<ul>
<li>flat-head screwdriver</li>
<li>Phillips-head screwdriver</li>
<li>8mm (M5), 10mm (M6), 13mm (M8) spanners (or adjustable)</li>
<li>gaffer tape</li>
</ul>
<h2 id="parts"><span class="header-section-number">1.4</span> Parts</h2>
<h3 id="peli-storm-case-im2500"><span class="header-section-number">1.4.1</span> Peli Storm Case iM2500</h3>
<p><em>55 × 36 × 23cm, 15kg</em></p>
<ul>
<li>2 × Leadshine Power Supply SPS487</li>
<li>4 × Leadshine Stepper Drivers EM806</li>
<li>4 × SY60STH86 Stepper Motors</li>
<li>Electronics unit, consisting of:
<ul>
<li>4 × Pololu A-Star 32U4 Microcontrollers</li>
<li>Anker 4-port USB hub</li>
</ul></li>
</ul>
<h3 id="hardcase-hn40w"><span class="header-section-number">1.4.2</span> Hardcase HN40W</h3>
<p><em>102 × 31 × 31cm, 17kg</em></p>
<ul>
<li>1 × LX1203 AC/DC power adapter 12V</li>
<li>4 × Balluff BES M08EG Inductive Sensors</li>
<li>20 × microtonally tuned tuning forks</li>
<li>5 × beaters</li>
<li>1 × beater spare centre part</li>
<li>4 × Steel mounting bracket</li>
<li>4 × Plywood base</li>
<li>2 × Plywood brace</li>
<li>4 × Perspex guide</li>
<li>4 × Chipboard tablet support</li>
<li>4 × Resonance box with attached contact microphone</li>
<li>1 × Spare contact microphone</li>
<li>2 × Telephone pickup microphone with 6.25mm jack socket connections</li>
<li>4 × Telephone pickup microphone with 3.5mm jack plug connections</li>
<li>2 × Mono 3.5mm→6.25mm plug adapter</li>
</ul>
<h4 id="bolts-nuts-washers"><span class="header-section-number">1.4.2.1</span> Bolts, Nuts, Washers</h4>
<ul>
<li>16 × M5 long threaded bolts with attached lock-nuts</li>
<li>20 × M5 washers</li>
<li>32 x M5 hex nuts</li>
<li>4 × M5 12mm screws</li>
<li>8 × M5 25mm screws</li>
<li>24 × M6 40mm bolts</li>
<li>24 × M6 hex nuts</li>
<li>24 × M6 17mm washers</li>
<li>separate bag containing spares of all of these</li>
</ul>
<h4 id="cables"><span class="header-section-number">1.4.2.2</span> Cables</h4>
<ul>
<li>1 × Euro plug kettle cable</li>
<li>1 × UK plug kettle cable</li>
<li>1 × UK→Euro power adapter</li>
<li>1 × UK→CH power adapter</li>
<li>1 × USB extension cable</li>
<li>6 × 5-pin XLR extension cable</li>
<li>1 × 3.5mm jack extension cable</li>
<li>1 × USB→RJ11 serial adapter cable (not required for normal operation)</li>
</ul>
<h2 id="hardware-assembly"><span class="header-section-number">1.5</span> Hardware assembly</h2>
<ol style="list-style-type: decimal">
<li><p>Attach <code>Motor</code>s to steel brackets, matching motor numbers and orienting the motor cables to the wide side of the bracket. Use four long M5 bolts, with washers and nuts. Tighten diagonally opposite bolts in order. Ensure the lock-nuts on the top of the motors are flush with the bolt. Tighten well as this will not be accessible later.<br />
<img src="images/motor-bracket.jpg" alt="motor-bracket" /></p></li>
<li><p>Attach <code>Sensor</code>s to steel brackets, matching the numbers. Use one 12mm M5 screw, with a washer and nut. Tighten well as this will not be accessible later.<br />
<img src="images/sensor-bracket.jpg" alt="sensor-bracket" /></p></li>
<li><p>Attach <code>Motor</code> assemblies to <code>Base</code> boards on outer bolts with two 17mm washers and M5 nuts. Do not tighten yet.<br />
<img src="images/motor-base.jpg" alt="motor-base" /></p></li>
<li><p>Insert into percussion stands and adjust all four motors to the same height.</p></li>
<li><p>Join <code>Motor 0</code> to <code>Motor 1</code> with <code>Brace A</code> (underneath) using four M6 bolts. Include a washer on the brace side.<br />
<img src="images/motor-brace.jpg" alt="motor-brace" /></p></li>
<li><p>Join <code>Motor 2</code> to <code>Motor 3</code> with <code>Brace B</code>.</p></li>
<li><p>Tighten all 6 nuts on the underside of each motor assembly.<br />
<img src="images/two-motor-assembly.jpg" alt="two-motor-assembly" /></p></li>
<li><p>Attach <code>Beater</code>s to each motor and firmly tighten with the hex key. The top of the motor shaft should be flush with the top of the beater.<br />
<img src="images/beater-motor.jpg" alt="beater-motor" /></p></li>
<li><p>Check the beater can rotate freely without hitting the <code>Sensor</code>. The screw on the beater should pass directly over the sensor with a clearance of 1 mm. The sensor can be adjusted to align if necessary by bending the metal bracket or changing the height with the nuts. The depth of the beater screws can also be adjusted with a screwdriver.<br />
<img src="images/beater-sensor.jpg" alt="beater-sensor" /></p></li>
<li><p>Attach perspex <code>Guide</code>s with 25mm M5 screws and nuts. Do not overtighten.<br />
<img src="images/guide-base.jpg" alt="guide-base" /></p></li>
<li><p>If using a tablet score reader, attach the <code>Tablet support</code>s using 35mm M6 bolts and nuts.<br />
<img src="images/tablet-support.jpg" alt="tablet-support" /></p></li>
</ol>
<h2 id="electrical-connections"><span class="header-section-number">1.6</span> Electrical connections</h2>
<ol style="list-style-type: decimal">
<li><p>Carefully remove the top two layers of packing foam from the driver box and store safely. <strong>Do not run the motors with this foam in place!</strong></p></li>
<li><p>Connect output cables from the <code>Driver box</code> to the <code>Motor</code> and <code>Sensor</code> cables. There are four 5-pin XLR extension cables included if necessary for the motor cables; the sensor cables can be extended with standard 3-pin XLR microphone cables. Keep cable runs as short as possible and take care never to stress the cable attachments to the electronics and driver units.</p></li>
<li><p>Gently plug the <code>Electronics Power</code> adapter into the barrel-jack socket on the left-hand end of the electronics unit.<br />
<img src="images/electronics-power.jpg" alt="electronics-power" /></p></li>
<li><p>With the <code>Main Power</code> off, plug in the <code>Electronics Power</code>. The LEDs on the bottom of each sensor should be on unless the beater is over it. Check the beaters rotate freely and the sensor lights switch on and off accordingly. Adjust sensors if necessary. Leave the beaters turned so that one end is above the guide.</p></li>
<li><p>Unplug the <code>Electronics Power</code> and plug in the <code>Main Power</code>. Green LEDs should show on <code>Power A</code>, <code>Power B</code> and the four <code>Drivers</code>. Check that the four beaters are now held by the motors.</p></li>
<li><p>With the <code>Main Power</code> on, re-plug the <code>Electronics Power</code>. The four beaters should rotate to the sensor position and stop.</p></li>
<li><p>When powering on each time, switch on the <code>Main Power</code> first, then the <code>Electronics Power</code>, then lastly plug in the <code>USB</code> computer connection.</p></li>
</ol>
<h2 id="audio-setup"><span class="header-section-number">1.7</span> Audio setup</h2>
<ol style="list-style-type: decimal">
<li><p>Attach the four <code>Telephone microphone</code>s to the four <code>Motor</code>s (audience side) with gaffer tape. Wrap the tape all the way around the motor or it will melt and fall off.</p></li>
<li><p>Connect the <code>Telephone microphone</code>s to a mixer with TS cables (mono jack).</p></li>
<li><p>Connect the <code>Contact microphone</code>s in each <code>Resonance box</code> to a mixer with TS cables (mono jack).</p></li>
<li><p>The <code>SuperCollider</code> patch will output a mono click-track on channel 1 of your computer's audio interface.</p></li>
</ol>
<p>It can be effective to tightly bandpass filter the <code>Resonance box</code> inputs around the specific frequencies of the tuning forks played on each box.</p>
<h1 id="operation-details"><span class="header-section-number">2</span> Operation details</h1>
<h2 id="click-level-adjustment"><span class="header-section-number">2.1</span> Click level adjustment</h2>
<p>The <code>SuperCollider</code> patch plays the score of <code>H</code> as entered in the file <code>score.csv</code>. This should not need to be edited, except if you need to vary the level of the click.</p>
<p>To do this, open the file in a spreadsheet application such as <code>LibreOffice Calc</code>. (Apple <code>Numbers</code> may work, but sometimes adds formatting characters which might corrupt the file.) The entries in the fifth column <code>clickdb</code> specify the level of the click in dB. Enter the required level on the row of the bar/beat number.</p>
<h2 id="action-syntax"><span class="header-section-number">2.2</span> Action syntax</h2>
<p>Each <code>Motor</code> action is read from <code>score.csv</code>. The actions are encoded as a sequence of characters according to the following schema:</p>
<pre><code>command [halfturns:H] [dir:l|r] pitch:P[-P][-P] [duration:D][-D] [recentre:c|n]</code></pre>
<h3 id="commands"><span class="header-section-number">2.2.1</span> Commands</h3>
<ul>
<li><code>t</code> — turn, e.g. <code>t 1 l 69</code> = one halfturn left at pitch 69.</li>
<li><code>d</code> — duration turn, e.g. <code>d r 60 3 n</code> = right turning for 3 beats at pitch 60, stop without finding sensor.</li>
<li><code>u</code> — turn until next command, e.g. <code>u l 64</code> = left turning at pitch 64 until next command sent.</li>
<li><code>s</code> — stop (for use after a <code>u</code> command).</li>
<li><code>g</code> — duration gliss, e.g. <code>g r 57-69 1.5 c</code> = right turning gliss from pitch 57-69 over 1.5 beats, find sensor afterwards.</li>
<li><code>q</code> — double gliss, e.g. <code>q l 48-60-54 1-0.33 n</code> = left turning double gliss from pitch 48-60 over 1 beat, then from pitch 60-54 over 1/3 beat, stop without finding sensor.</li>
<li><code>T</code> — timed turn, e.g. <code>T 2 r 72 3</code> = two halfturns right over 3 beats. <strong>N.B.</strong> the pitch number is necessary but ignored.</li>
<li><code>G</code> — gliss, e.g. <code>G 3 l 66-60</code> = gliss from pitch 66-60 in 3 halfturns left. Duration is indeterminate.</li>
<li><code>S</code> — set sustain duration, e.g. <code>S 0.25</code> = set sustain duration to a quarter of a beat.</li>
</ul>
<h3 id="shortcut"><span class="header-section-number">2.2.2</span> Shortcut</h3>
<ul>
<li><code>h</code> = single halfturn at fastest speed, this is equivalent to <code>t 1 r 72</code></li>
</ul>
<h3 id="halfturns"><span class="header-section-number">2.2.3</span> Halfturns</h3>
<ul>
<li>1-19 number of halfturns to complete</li>
</ul>
<h3 id="direction"><span class="header-section-number">2.2.4</span> Direction</h3>
<ul>
<li>l = left</li>
<li>r = right</li>
</ul>
<h3 id="pitch"><span class="header-section-number">2.2.5</span> Pitch</h3>
<p>Motor speed is indicated by the resultant MIDI pitch. The range is three octaves from 36 to 72 including quartertones.</p>
<h3 id="duration"><span class="header-section-number">2.2.6</span> Duration</h3>
<ul>
<li>in beats at current tempo</li>
</ul>
<h3 id="recentre"><span class="header-section-number">2.2.7</span> Recentre</h3>
<ul>
<li><code>c</code> = recentre</li>
<li><code>n</code> = do not recentre</li>
</ul>
<h1 id="troubleshooting"><span class="header-section-number">3</span> Troubleshooting</h1>
<ul>
<li>Check beaters rotate freely and are attached to the motor shaft firmly.</li>
<li>Check sensor alignment and clearance.</li>
<li>Check driver DIP switches against following list. Rotary switch to position <code>C</code>.
<ol style="list-style-type: decimal">
<li><code>OFF</code></li>
<li><code>OFF</code></li>
<li><code>ON</code></li>
<li><code>ON</code></li>
<li><code>OFF</code></li>
<li><code>ON</code></li>
<li><code>ON</code></li>
<li><code>ON</code></li>
</ol></li>
</ul>
</body>
</html>
